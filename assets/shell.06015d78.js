import{o as e,c as l,b as n,e as t,r as s,l as i,u as h}from"./vendor.1180558b.js";const o={class:"markdown-body"},u=[n("h1",null,"Shell engine usage document",-1),n("p",null,"This article mainly introduces the configuration, deployment and use of Shell engine in Linkis1.0",-1),n("h2",null,"1. The environment configuration before using the Shell engine",-1),n("p",null,"If you want to use the shell engine on your server, you need to ensure that the user’s PATH has the bash execution directory and execution permissions.",-1),n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"Environment variable name"),n("th",null,"Environment variable content"),n("th",null,"Remarks")])]),n("tbody",null,[n("tr",null,[n("td",null,"sh execution environment"),n("td",null,"bash environment variables"),n("td",null,"bash is recommended")])])],-1),n("p",null,"Table 1-1 Environmental configuration list",-1),n("h2",null,"2. Shell engine configuration and deployment",-1),n("h3",null,"2.1 Shell version selection and compilation",-1),n("p",null,"The shell engine does not need to be compiled by the user, and the compiled shell engine plug-in package can be used directly.",-1),n("h3",null,"2.2 shell engineConn deployment and loading",-1),n("p",null,"Here you can use the default loading method to be used normally.",-1),n("h3",null,"2.3 Labels of the shell engine",-1),n("p",null,"Here you can use the default dml.sql to insert it and it can be used normally.",-1),n("h2",null,"3. Use of Shell Engine",-1),n("h3",null,"Ready to operate",-1),n("p",null,"Before submitting the shell on linkis, you only need to ensure that there is the path of the shell in your user’s $PATH.",-1),n("h3",null,"3.1 How to use Scriptis",-1),n("p",null,"The use of Scriptis is the simplest. You can directly enter Scriptis, right-click the directory and create a new shell script, write shell code and click Execute.",-1),n("p",null,"The execution principle of the shell is that the shell engine starts a system process to execute through the ProcessBuilder that comes with java, and redirects the output of the process to the engine and writes it to the log.",-1),n("p",null,[n("img",{src:"/assets/shell-run.6a5566b5.png",alt:""})],-1),n("p",null,"Figure 3-1 Screenshot of shell execution effect",-1),n("h3",null,"3.2 How to use workflow",-1),n("p",null,"The DSS workflow also has a shell node. You can drag in the workflow node, then double-click to enter and edit the code, and then execute it in the form of a workflow.",-1),n("p",null,"Shell execution needs to pay attention to one point. If the workflow is executed in multiple lines, the success of the workflow node is determined by the last command. For example, the first two lines are wrong, but the shell return value of the last line is 0, then this node Is successful.",-1),n("h3",null,"3.3 How to use Linkis Client",-1),n("p",null,[t("Linkis also provides a client method to call the shell task, the calling method is through the SDK provided by LinkisClient. We provide java and scala two ways to call, the specific usage can refer to <"),n("a",{href:"https://github.com/WeBankFinTech/Linkis/wiki/Linkis1.0%E7%94%A8%E6%88%B7%E4"},"https://github.com/WeBankFinTech/Linkis/wiki/Linkis1.0用户�"),t(" %BD%BF%E7%94%A8%E6%96%87%E6%A1%A3>.")],-1),n("h2",null,"4. Shell engine user settings",-1),n("p",null,"The shell engine can generally set the maximum memory of the engine JVM.",-1)],a={setup:(n,{expose:t})=>(t({frontmatter:{}}),(n,t)=>(e(),l("div",o,u)))},r={class:"markdown-body"},c=[n("h1",null,"Shell 引擎使用文档",-1),n("p",null,"本文主要介绍在Linkis1.0中，Shell引擎的配置、部署和使用。",-1),n("h2",null,"1.Shell引擎使用前的环境配置",-1),n("p",null,"如果您希望在您的服务器上使用shell引擎，您需要保证用户的PATH中是有bash的执行目录和执行权限。",-1),n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"环境变量名"),n("th",null,"环境变量内容"),n("th",null,"备注")])]),n("tbody",null,[n("tr",null,[n("td",null,"sh执行环境"),n("td",null,"bash环境变量"),n("td",null,"建议使用bash")])])],-1),n("p",null,"表1-1 环境配置清单",-1),n("h2",null,"2.Shell引擎的配置和部署",-1),n("h3",null,"2.1 Shell版本的选择和编译",-1),n("p",null,"Shell引擎不需要用户自行编译，直接使用编译好的shell引擎插件包即可。",-1),n("h3",null,"2.2 shell engineConn部署和加载",-1),n("p",null,"此处可以使用默认的加载方式即可正常使用。",-1),n("h3",null,"2.3 shell引擎的标签",-1),n("p",null,"此处可以使用默认的dml.sql进行插入即可正常使用。",-1),n("h2",null,"3.Shell引擎的使用",-1),n("h3",null,"准备操作",-1),n("p",null,"在linkis上提交shell之前，您只需要保证您的用户的$PATH中有shell的路径即可。",-1),n("h3",null,"3.1 Scriptis的使用方式",-1),n("p",null,"Scriptis的使用方式是最简单的，您可以直接进入Scriptis，右键目录然后新建shell脚本并编写shell代码并点击执行。",-1),n("p",null,"shell的执行原理是shell引擎通过java自带的ProcessBuilder启动一个系统进程来进行执行，并且将进程的输出重定向到引擎并写入到日志中。",-1),n("p",null,[n("img",{src:"/assets/shell-run.6a5566b5.png",alt:""})],-1),n("p",null,"图3-1 shell的执行效果截图",-1),n("h3",null,"3.2工作流的使用方式",-1),n("p",null,"DSS工作流也有shell的节点，您可以拖入工作流节点，然后双击进入然后进行编辑代码，然后以工作流的形式进行执行。",-1),n("p",null,"Shell执行需要注意一点，在工作流中如果是多行执行的话,工作流节点是否成功是由最后一个命令确定，比如前两行是错的,但是最后一行的shell返回值是0，那么这个节点是成功的。",-1),n("h3",null,"3.3 Linkis Client的使用方式",-1),n("p",null,[t("Linkis也提供了client的方式进行调用shell的任务，调用的方式是通过LinkisClient提供的SDK的方式。我们提供了java和scala两种方式进行调用，具体的使用方式可以参考"),n("a",{href:"https://github.com/WeBankFinTech/Linkis/wiki/Linkis1.0%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3"},"https://github.com/WeBankFinTech/Linkis/wiki/Linkis1.0用户使用文档"),t("。")],-1),n("h2",null,"4.Shell引擎的用户设置",-1),n("p",null,"shell引擎一般可以设置引擎JVM的最大内存。",-1)],d={setup:(n,{expose:t})=>(t({frontmatter:{}}),(n,t)=>(e(),l("div",r,c)))},p={setup(l){const n=s(localStorage.getItem("locale")||"en");return(l,t)=>"en"===n.value?(e(),i(h(a),{key:0})):(e(),i(h(d),{key:1}))}};export{p as default};
