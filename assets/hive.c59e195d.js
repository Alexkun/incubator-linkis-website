import{_ as n,a as e}from"./workflow.72652f4e.js";import{o as i,c as l,b as t,e as u,r as o,l as a,u as h}from"./vendor.1180558b.js";var s="/assets/hive-config.b2dec89f.png";const r={class:"markdown-body"},c=[t("h1",null,"Hive engine usage documentation",-1),t("p",null,"This article mainly introduces the configuration, deployment and use of Hive engine in Linkis1.0.",-1),t("h2",null,"1. Environment configuration before Hive engine use",-1),t("p",null,"If you want to use the hive engine on your server, you need to ensure that the following environment variables have been set correctly and that the user who started the engine has these environment variables.",-1),t("p",null,"It is strongly recommended that you check these environment variables of the executing user before executing hive tasks.",-1),t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"Environment variable name"),t("th",null,"Environment variable content"),t("th",null,"Remarks")])]),t("tbody",null,[t("tr",null,[t("td",null,"JAVA_HOME"),t("td",null,"JDK installation path"),t("td",null,"Required")]),t("tr",null,[t("td",null,"HADOOP_HOME"),t("td",null,"Hadoop installation path"),t("td",null,"Required")]),t("tr",null,[t("td",null,"HADOOP_CONF_DIR"),t("td",null,"Hadoop configuration path"),t("td",null,"Required")]),t("tr",null,[t("td",null,"HIVE_CONF_DIR"),t("td",null,"Hive configuration path"),t("td",null,"Required")])])],-1),t("p",null,"Table 1-1 Environmental configuration list",-1),t("h2",null,"2. Hive engine configuration and deployment",-1),t("h3",null,"2.1 Hive version selection and compilation",-1),t("p",null,"The version of Hive supports hive1.x and hive2.x, the default is to support hive on MapReduce, if you want to change to Hive on Tez, you need to make some changes in accordance with this pr.",-1),t("p",null,[t("a",{href:"https://github.com/WeBankFinTech/Linkis/pull/541"},"https://github.com/WeBankFinTech/Linkis/pull/541")],-1),t("p",null,"The hive version supported by default is 1.2.1. If you want to modify the hive version, such as 2.3.3, you can find the linkis-engineplugin-hive module and change the <hive.version> tag to 2.3 .3, then compile this module separately",-1),t("h3",null,"2.2 hive engineConn deployment and loading",-1),t("p",null,"If you have already compiled your hive engine plug-in has been compiled, then you need to put the new plug-in in the specified location to load, you can refer to the following article for details",-1),t("p",null,[t("a",{href:"https://github.com/WeBankFinTech/Linkis/wiki/EngineConnPlugin%E5%BC%95%E6%93%8E%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3"},"https://github.com/WeBankFinTech/Linkis/wiki/EngineConnPlugin引擎插件安装文档")],-1),t("h3",null,"2.3 Hive engine tags",-1),t("p",null,"Linkis1.0 is done through tags, so we need to insert data in our database, the way of inserting is shown below.",-1),t("p",null,[t("a",{href:"https://github.com/WeBankFinTech/Linkis/wiki/EngineConnPlugin%E5%BC%95%E6%93%8E%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3#22-%E7%AE%A1%E7%90%86%E5%8F%B0configuration%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%E5%8F%AF%E9%80%89"},"https://github.com/WeBankFinTech/Linkis/wiki/EngineConnPlugin引擎插件安装文档#22-管理台configuration配置修改可选")],-1),t("h2",null,"3. Use of hive engine",-1),t("h3",null,"Preparation for operation, queue setting",-1),t("p",null,"Hive’s MapReduce task requires yarn resources, so you need to set up the queue at the beginning",-1),t("p",null,[t("img",{src:n,alt:""})],-1),t("p",null,"Figure 3-1 Queue settings",-1),t("h3",null,"3.1 How to use Scriptis",-1),t("p",null,"The use of Scriptis is the simplest. You can directly enter Scriptis, right-click the directory and create a new hive script and write hivesql code.",-1),t("p",null,"The implementation of the hive engine is by instantiating the driver instance of hive, and then the driver submits the task, and obtains the result set and displays it.",-1),t("p",null,[t("img",{src:"/assets/hive-run.6aa39a3f.png",alt:""})],-1),t("p",null,"Figure 3-2 Screenshot of the execution effect of hivesql",-1),t("h3",null,"3.2 How to use workflow",-1),t("p",null,"DSS workflow also has a hive node, you can drag in the workflow node, then double-click to enter and edit the code, and then execute it in the form of a workflow.",-1),t("p",null,[t("img",{src:e,alt:""})],-1),t("p",null,"Figure 3-5 The node where the workflow executes hive",-1),t("h3",null,"3.3 How to use Linkis Client",-1),t("p",null,[u("Linkis also provides a client method to call hive tasks. The call method is through the SDK provided by LinkisClient. We provide java and scala two ways to call, the specific usage can refer to <"),t("a",{href:"https://github.com/WeBankFinTech/Linkis/wiki/Linkis1.0%E7%94%A8%E6%88%B7%E4"},"https://github.com/WeBankFinTech/Linkis/wiki/Linkis1.0用户�"),u(" %BD%BF%E7%94%A8%E6%96%87%E6%A1%A3>.")],-1),t("h2",null,"4. Hive engine user settings",-1),t("p",null,"In addition to the above engine configuration, users can also make custom settings, including the memory size of the hive Driver process, etc.",-1),t("p",null,[t("img",{src:s,alt:""})],-1),t("p",null,"Figure 4-1 User-defined configuration management console of hive",-1)],p={setup:(n,{expose:e})=>(e({frontmatter:{}}),(n,e)=>(i(),l("div",r,c)))},d={class:"markdown-body"},g=[t("h1",null,"Hive 引擎使用文档",-1),t("p",null,"本文主要介绍在Linkis1.0中，Hive引擎的配置、部署和使用。",-1),t("h2",null,"1.Hive引擎使用前的环境配置",-1),t("p",null,"如果您希望在您的服务器上使用hive引擎，您需要保证以下的环境变量已经设置正确并且引擎的启动用户是有这些环境变量的。",-1),t("p",null,"强烈建议您在执行hive任务之前，检查下执行用户的这些环境变量。",-1),t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"环境变量名"),t("th",null,"环境变量内容"),t("th",null,"备注")])]),t("tbody",null,[t("tr",null,[t("td",null,"JAVA_HOME"),t("td",null,"JDK安装路径"),t("td",null,"必须")]),t("tr",null,[t("td",null,"HADOOP_HOME"),t("td",null,"Hadoop安装路径"),t("td",null,"必须")]),t("tr",null,[t("td",null,"HADOOP_CONF_DIR"),t("td",null,"Hadoop配置路径"),t("td",null,"必须")]),t("tr",null,[t("td",null,"HIVE_CONF_DIR"),t("td",null,"Hive配置路径"),t("td",null,"必须")])])],-1),t("p",null,"表1-1 环境配置清单",-1),t("h2",null,"2.Hive引擎的配置和部署",-1),t("h3",null,"2.1 Hive版本的选择和编译",-1),t("p",null,"Hive的版本是支持hive1.x和hive2.x，默认是支持hive on MapReduce，如果您想改成Hive on Tez，需要您按照此pr进行一下修改。",-1),t("p",null,[t("a",{href:"https://github.com/WeBankFinTech/Linkis/pull/541"},"https://github.com/WeBankFinTech/Linkis/pull/541")],-1),t("p",null,"默认支持的hive版本是1.2.1,如果您想修改hive的版本，比如想要修改成2.3.3，您可以找到linkis-engineplugin-hive模块，将<hive.version>标签进行改成2.3.3，然后单独编译此模块即可",-1),t("h3",null,"2.2 hive engineConn部署和加载",-1),t("p",null,"如果您已经编译完了您的hive引擎的插件已经编译完成，那么您需要将新的插件放置到指定的位置中才能加载，具体可以参考下面这篇文章",-1),t("p",null,[t("a",{href:"https://github.com/WeBankFinTech/Linkis/wiki/EngineConnPlugin%E5%BC%95%E6%93%8E%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3"},"https://github.com/WeBankFinTech/Linkis/wiki/EngineConnPlugin引擎插件安装文档")],-1),t("h3",null,"2.3 hive引擎的标签",-1),t("p",null,"Linkis1.0是通过标签来进行的，所以需要在我们数据库中插入数据，插入的方式如下文所示。",-1),t("p",null,[t("a",{href:"https://github.com/WeBankFinTech/Linkis/wiki/EngineConnPlugin%E5%BC%95%E6%93%8E%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3#22-%E7%AE%A1%E7%90%86%E5%8F%B0configuration%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%E5%8F%AF%E9%80%89"},"https://github.com/WeBankFinTech/Linkis/wiki/EngineConnPlugin引擎插件安装文档#22-管理台configuration配置修改可选")],-1),t("h2",null,"3.hive引擎的使用",-1),t("h3",null,"准备操作，队列设置",-1),t("p",null,"hive的MapReduce任务是需要用到yarn的资源，所以需要您在一开始就设置队列",-1),t("p",null,[t("img",{src:n,alt:""})],-1),t("p",null,"图3-1 队列设置",-1),t("h3",null,"3.1 Scriptis的使用方式",-1),t("p",null,"Scriptis的使用方式是最简单的，您可以直接进入Scriptis，右键目录然后新建hive脚本并编写hivesql代码。",-1),t("p",null,"hive引擎的实现方式通过实例化hive的Driver实例，然后由Driver来提交任务，并获取结果集并展示。",-1),t("p",null,[t("img",{src:"/assets/hive-run.6aa39a3f.png",alt:""})],-1),t("p",null,"图3-2 hivesql的执行效果截图",-1),t("h3",null,"3.2工作流的使用方式",-1),t("p",null,"DSS工作流也有hive的节点，您可以拖入工作流节点，然后双击进入然后进行编辑代码，然后以工作流的形式进行执行。",-1),t("p",null,[t("img",{src:e,alt:""})],-1),t("p",null,"图3-5 工作流执行hive的节点",-1),t("h3",null,"3.3 Linkis Client的使用方式",-1),t("p",null,[u("Linkis也提供了client的方式进行调用hive的任务，调用的方式是通过LinkisClient提供的SDK的方式。我们提供了java和scala两种方式进行调用，具体的使用方式可以参考"),t("a",{href:"https://github.com/WeBankFinTech/Linkis/wiki/Linkis1.0%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3"},"https://github.com/WeBankFinTech/Linkis/wiki/Linkis1.0用户使用文档"),u("。")],-1),t("h2",null,"4.Hive引擎的用户设置",-1),t("p",null,"除了以上引擎配置，用户还可以进行自定义的设置，包括hive Driver进程的内存大小等。",-1),t("p",null,[t("img",{src:s,alt:""})],-1),t("p",null,"图4-1 hive的用户自定义配置管理台",-1)],v={setup:(n,{expose:e})=>(e({frontmatter:{}}),(n,e)=>(i(),l("div",d,g)))},E={setup(n){const e=o(localStorage.getItem("locale")||"en");return(n,l)=>"en"===e.value?(i(),a(h(p),{key:0})):(i(),a(h(v),{key:1}))}};export{E as default};
